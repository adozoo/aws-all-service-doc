
## AWS Cognito 中创建用户池

=== 架构图

image::/图片2/106图片/架构图.png[架构图]

== 实验步骤

=== 创建用户池

> - 请确保您位于**美国东部（弗吉尼亚北部）**us-east-1 区域。
> - 顶部菜单**导航到 Cognito**
> - 单击**管理用户池**。
> - 单击**创建用户池**。

image::/图片2/106图片/创建用户池.png[创建用户池]

---

=== 名称和属性

> - 为您的用户池**指定一个描述性名称**（身份需要该名称）。我们将使用**``TEST``**。
> - 我们选择**“逐步介绍设置”**，使每个设置都让**我们自己的选择**，如下所示。

image::/图片2/106图片/逐步介绍设置.png[逐步介绍设置]

> - 在**“属性”**页面中，我们可以提及用户**如何执行登录**。
> - 您可以选择让用户使用**电子邮件地址**、**电话号码**、**用户名**或**首选用户名**以及**密码**登录。
> - 在这里，我们选择**电子邮件地址或电话号码**，用户可以在其中**使用电子邮件地址或电话号码**作为其用户名**进行注册和登录**。在此处，选择**“允许使用电子邮件地址”**。

image::/图片2/106图片/电话号码.png[电话号码]

> - 我们可以**选择标准属性**，这是在执行**注册时需要的**。在这里，我们选择**电子邮件，姓名，首选用户名，电话号码**，这些都是执行注册所必需的。
> - 我们还可以通过单击**“添加其他属性”**来自定义注册时所需的属性。
> - 点击**下一步**

image::/图片2/106图片/添加其他属性.png[添加其他属性]

---


=== 策略

> - 我们给出了**最小密码强度**，并可以添加所需的**参数，如数字，小写，大写和特殊字符**。在这里，我们**选择所有参数**。
> - 您可以选择仅**允许管理员创建用户或允许用户自行注册**。
> - 我们选择**允许用户自行注册**，用户可以在**没有管理员干扰的情况下自行注册**。
> - 作为管理员，您**可以配置临时密码何时过期**。这包括**管理员创建的帐户**，即如果您选择**仅允许管理员创建用户**的情况。在这里，我们可以**保留该选项**。

image::/图片2/106图片/管理员创建的帐户.png[管理员创建的帐户]

> - 点击**下一步**

---

=== MFA 和验证

> - **多重身份验证 （MFA） **可提高最终用户的安全性。如果**启用了 MFA**，则**必须验证电话号码**。我们**选择 OFF**。
> - 帐户恢复：当用户**忘记密码时**，他们可以将代码**发送到其经过验证的电子邮件**或**经过验证的手机以恢复其帐户**。您可以在下面选择**发送代码的首选方式**。在这里，我们选择**仅使用电子邮件**。

image::/图片2/106图片/仅电子邮件.png[仅电子邮件]

> - **验证要求用户**从其电子邮件或手机中检索代码以确认所有权。**验证电话或电子邮件**对于自动确认用户并启用从忘记的密码中恢复是必要的。在这种情况下，我们选择**电子邮件**。

image::/图片2/106图片/上述警告.png[上述警告]

> - 忽略**上述警告**，并取消选中**确认以继续**。点击**下一步**

---

=== 消息自定义

> - 您可以从**经过 SES 验证的身份发送电子邮件**。在使用 Amazon SES 发送电子邮件之前，您必须验证要用作**发件人、来源**或返回路径地址的**每个身份**，以证明您拥有该身份。现在，我们将其**留空**。
> - Amazon SES 配置：Cognito 将通过您的 Amazon SES 配置发送电子邮件。如果需要**更高的每日电子邮件限制**，请选择**“是”**，否则选择**“否”**。在这里，我们选择**否 - 使用 Cognito（默认）**。

image::/图片2/106图片/使用 Cognito.png[使用 Cognito]

> - 验证类型：您可以**选择发送代码或可点击的链接**，并**自定义邮件以验证电子邮件地址**。我们将其**默认为代码**。

image::/图片2/106图片/默认为代码.png[默认为代码]

> - 用户邀请消息：我们可以**自定义 SMS 消息**、**电子邮件主题和电子邮件消息**，以便您将文本传递给用户。

image::/图片2/106图片/用户邀请消息.png[用户邀请消息]

> - 点击**下一步**

---

=== 标签

> - 您可以通过输入**标签键和标签值**来**创建新标签**。
> * 标签键：输入**``Name``**
> * 标记值：输入**``MyUserPool``**
> - 点击**下一步**

---

=== 设备

> - 我们可以选择**记住用户的设备**。在这里，我们选择**“否”**，然后单击**“下一步”**

---

=== 应用程序客户端

> - 我们添加的应用程序客户端将**获得一个唯一的 ID **和一个**可选的密钥**来访问此用户池。我们在此处**未使用任何应用程序客户端**，因此我们继续执行**下一步**

---

=== 自定义工作流

> - 您可以**使用 AWS Lambda 函数**进行**高级自定义**。如果要**自定义工作流和用户体验**，请选择要使用**不同事件触发的 AWS Lambda 函数**。
> - 您可以**浏览所有事件**。我们**跳过此步骤**并继续执行**下一步**

image::/图片2/106图片/自定义工作流.png[自定义工作流]

---

=== 审核

> - 查看**所有设置**，然后单击**“创建池”**，如下所示。

image::/图片2/106图片/审阅.png[审阅]

> - 您将在成功**创建用户池时收到一条提示消息**。
> - 在左上角，单击**用户池**以查看您的用户池。
> - **导航到 Cognito**，单击**“用户和组”**以导航到**“用户”**页面，**如下所示**

image::/图片2/106图片/用户和组.png[用户和组]

> - 在这里，我们可以**开始创建用户和组**。
> - 从**管理的角度来看**，如果我们有**一个应用程序**，该应用程序将**调用 Amazon Cognito 来创建用户本身**。

---
