
## Amazon Macie使用

=== 什么是Amazon Macie？

> - Amazon Macie 使用**模式匹配**和**机器学习**来**保护存储在 S3 存储桶中的敏感数据**。
> - 它检测**数据类型列表**，包括**PII（个人身份信息）**，例如**姓名，地址，信用卡号**等。
> - 除了**检测数据外**，它还可让您**全面了解 S3 存储桶及其信息**，例如**可公开访问的存储桶**、**未加密存储桶**以及与**其他账户共享的存储桶**。
> - 要**开始使用 Amazon Macie**，您可以使用**其 30 天的免费试用版**进行**存储桶评估**。
> - **免费试用版不包括发现 S3 存储桶中存在的敏感数据**。

=== 架构图

image::/图片2/134图片/架构图.png[架构图]

== 实验步骤

=== 创建 S3 存储桶

> - 菜单**导航到S3**，**创建S3存储桶**
> - 请确保您位于**美国东部（弗吉尼亚北部）**us-east-1 区域。
> - 顶部菜单**导航到 S3**

image::/图片/09图片/导航到S3.png[导航到S3]

> - 在 S3 页面上，单击**``创建存储桶``**并**填写存储桶详细信息**。
> - 桶名称：输入**``macie-test-111``**
> * 注意： S3 存储桶名称是**全局唯一**的，请**选择一个可用的名称**。
> - AWS 区域：选择**美国东部（弗吉尼亚北部）美国东部-1**
> - 将**其他设置保留**为默认值。
> - **创建存储桶按钮**
> - S3 **存储桶已创建**。

---

=== 将文件上传到 S3 存储桶

> - **单击**存储桶名称**``macie-test-111``**。
> - 在对象中，您可以看到**以下消息**
> * 此存储桶中**没有任何对象**。

image::/图片/41图片/没有对象.png[没有对象]

> - 您可以从本地计算机上传**本实验所需文件**

==== **``本实验所需文件``**位于此仓库**附件目录**

> - 将文件**上传到我们的 S3 存储桶**
> * 点击**上传**按钮。
> * 点击**添加文件**按钮。
> * 浏览您的本地文件**并选择它**
> * 单击上传按钮**上传**。
> - 您可以从屏幕顶部的传输面板中**查看上传进度**。
> - 上传文件后，它将**显示在存储桶中**。

image::/图片2/134图片/显示在存储桶中.png[显示在存储桶中]

---

=== 为帐户启用 Macie

> - 请确保您位于**美国东部（弗吉尼亚北部）**us-east-1 区域。
> - 顶部菜单**导航到 Macie**
> - 在主页上，单击**“开始使用”**按钮以**配置 Amazon Macie**。
> - 在**“开始使用”**页面上，单击**“启用 Macie”**按钮。

image::/图片2/134图片/启用.png[启用]

---

=== 创建 Macie 作业

> - Macie将**尝试找出帐户的所有详细信息**，这可能**需要一些时间**。无需等待，只需单击**“创建作业”**按钮即可。
> - 步骤 1，选择 S3 存储桶
> * 要**选择存储桶**，请单击**添加筛选条件**，然后**单击存储桶名称**。
> * **键入 ``macie`` **并选择**存在的存储桶名称**，然后单击**“下一步”**按钮。
> - 步骤 2，查看 S3 存储桶
> * 将**所有内容保留为默认值**，然后单击**“下一步”**按钮。
> - 步骤 3，缩小范围
> * 在**“敏感数据发现选项”**中：选择**“一次性作业”**
> * 单击**“其他设置”**以展开
> * 将**“对象条件”**默认为**“文件扩展名”**。
> * 在**文本框中输入``csv``**，然后单击**“包含”**按钮。
> * 完成后，单击**“下一步”**按钮继续。
> - 步骤 4，选择托管数据标识符
> * 选择类型：**全选**
> * 单击**“下一步”**按钮。
> - 步骤 5，选择自定义数据标识符
> * 单击**“管理自定义标识符”**以**创建一个**。
> * 注意：这将在**“新建”选项卡中打开**，如果**无法打开**，请**启用弹出窗口**。
> - 单击右上角的**创建**选项。
> * 填写**详细信息**，如下所示：
> * 名称：输入**``aws``**
> * 描述：输入**``This identifier finds the data present in the format of AB-01 i.e. two characters, dash and followed by two numbers``**
> * 正则表达式：输入**``[a-z]{2}-[0-9]{2}``**
> * 将所有**其他选项保留为默认值**。
> * 单击**“提交”**按钮以**创建自定义数据标识符**。
> * 返回上一个选项卡，然后**单击刷新图标**以查看新创建的自定义数据标识符。
> * 刷新后，您将能够看到此处列出的**新数据标识符**，将其**选中**。单击**“下一步”**按钮。
> - 步骤6，输入名称和描述
> * 作业名称：输入**``awsJob``**
> * 作业描述：输入**``This job scans the bucket with a name starting as awslabs and gathers its finding based on the regular expression pattern``**
> * 单击**“下一步”**按钮。
> - 步骤 7，审核和创建
> * 查看**所有内容**，检查选项以获取敏感数据结果，然后单击下面的**“提交”**按钮。
> - 现在**已成功创建作业**。

image::/图片2/134图片/已成功创建作业.png[已成功创建作业]

---

=== Macie 作业运行和发现

> - 创建作业后，它将**立即开始运行**。
> - 作业运行**需要大约 10 分钟**进行**结果收集**。
> - 10 分钟后，状态将更改为**“完成”**。

image::/图片2/134图片/完成.png[完成]

> - 要查看作业的**查找结果**，请执行**以下操作**：
> * **单击此处的作业**。
> * 选择**显示结果**
> * 并选择**显示查找结果**

image::/图片2/134图片/显示结果.png[显示结果]

> - 要**检查确切结果**，请**打开结果**。

image::/图片2/134图片/打开结果.png[打开结果]

> - 执行**以下任务**：
> * 选择**当前查找结果**
> * 单击**“操作”**按钮
> * 并且，选择**“导出（JSON）”**
> * 此处**显示的 JSON 为只读格式**，您可以选择**下载完整报告**。

image::/图片2/134图片/下载完整报告.png[下载完整报告]

---
